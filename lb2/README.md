# lb2

# Программа для обработки изображений с графиком cos(x)

## Описание
Эта программа на C++ использует библиотеку CImg для обработки изображений. Она выполняет следующие действия:
- Создаёт новое изображение заданного размера
- Загружает исходное изображение из файла
- Вырезает повёрнутый прямоугольный фрагмент из центра исходного изображения
- Вставляет фрагмент в левый нижний угол нового изображения
- Рисует оси координат и график функции cos(x)
- Сохраняет результат в файл и отображает его

## Требования
- Компилятор C++ с поддержкой C++17
- Библиотека X11
- CMake версии 3.11 или выше

## Установка зависимостей

### Ubuntu/Debian
```bash
sudo apt update
sudo apt install build-essential cmake libx11-dev
```

### CentOS/RHEL/Fedora
```bash
sudo yum groupinstall "Development Tools"
sudo yum install cmake libX11-devel
# или для Fedora:
# sudo dnf install @development-tools cmake libX11-devel
```

## Сборка программы

1. Клонируйте или скачайте файлы проекта:
    - `main.cpp` - исходный код программы
    - `CImg.h` - заголовочный файл библиотеки CImg
    - `CMakeLists.txt` - конфигурация CMake

2. Создайте директорию для сборки:
```bash
mkdir build
cd build
```

3. Запустите CMake для генерации Makefile:
```bash
cmake ..
```

4. Соберите программу:
```bash
cmake --build .
```

После успешной сборки в директории `build` будет создан исполняемый файл `imgprocessor`.

## Использование

Программа принимает следующие аргументы командной строки:

```bash
./imgprocessor <input_file> <output_file> <width> <height>
```

Где:
- `<input_file>` - путь к исходному изображению
- `<output_file>` - путь для сохранения результата
- `<width>` - ширина нового изображения в пикселях
- `<height>` - высота нового изображения в пикселях

### Пример использования
```bash
./imgprocessor inputed_image.jpg output.pbm 400 400
```


## Структура программы
- `GetFragment()` - извлекает и поворачивает фрагмент из исходного изображения
- `InsertFragmentIntoImg()` - вставляет фрагмент в новое изображение
- `InsertAxes()` - рисует оси координат
- `InsertCosGraph()` - рисует график функции cos(x)

## Решение возможных проблем

### Ошибка при компиляции: "X11 not found"
Убедитесь, что установлены все зависимости:
```bash
sudo apt install libx11-dev  # для Ubuntu/Debian
```

### Ошибка при запуске: "Cannot display image"
Программа пытается отобразить изображение с помощью X11. Если вы работаете через SSH без X11-форвардинга, используйте флаг `-D` при подключении:
```bash
ssh -X user@hostname
```

Или отключите отображение, закомментировав строку `tmp_image.display();` в main.cpp.

### Программа собралась, но не создаёт выходной файл
Убедитесь, что у вас есть права на запись в указанную директорию и что путь к выходному файлу корректен.