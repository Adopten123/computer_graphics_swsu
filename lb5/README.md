# Программа обработки изображений с увеличением насыщенности и наложением

## Описание

Программа разработана для обработки графических изображений с использованием библиотеки CImg. Она выполняет чтение изображений из файлов, попиксельную обработку, наложение изображений с прозрачностью и сохранение результатов.

## Функциональность

- **Увеличение насыщенности**: Для пикселей с яркостью менее 50% увеличивает насыщенность на 30%
- **Наложение с прозрачностью**: Накладывает обработанное изображение на второе изображение с коэффициентом прозрачности 0.5
- **Поддержка различных режимов работы**:
    - Автоматическое создание тестовых изображений
    - Загрузка пользовательских изображений
- **Автоматическое изменение размеров**: Приводит изображения к одинаковому размеру при необходимости

## Требования

- Компилятор C++ с поддержкой C++11
- Библиотека CImg (заголовочный файл `CImg.h`)
- Операционная система: Windows/Linux/macOS

## Сборка и компиляция

### С помощью g++ (Linux/macOS):
```bash
g++ -o image_processor main.cpp -O2 -std=c++11
```

### С помощью Visual Studio (Windows):
1. Создайте новый проект C++
2. Добавьте файл `main.cpp` в проект
3. Убедитесь, что `CImg.h` находится в пути включения заголовков
4. Скомпилируйте проект

### С помощью CMake:
```cmake
cmake_minimum_required(VERSION 3.10)
project(ImageProcessor)

set(CMAKE_CXX_STANDARD 11)

add_executable(image_processor main.cpp)
```

## Использование

### Вариант 1: Создание и обработка тестовых изображений
```bash
./image_processor
```
Программа автоматически создаст два тестовых изображения (`input1.bmp`, `input2.bmp`) и сохранит результат как `output.bmp`.

### Вариант 2: Обработка пользовательских изображений
```bash
./image_processor image1.bmp image2.bmp
```
Где:
- `image1.bmp` - первое изображение для обработки (будет увеличена насыщенность)
- `image2.bmp` - второе изображение для наложения

## Форматы файлов

**Рекомендуемые форматы:**
- BMP (наиболее надежный)

**Поддерживаемые форматы:** Зависит от конфигурации CImg. BMP формат поддерживается всегда.

## Описание алгоритма

1. **Чтение изображений**: Загрузка двух изображений из файлов
2. **Преобразование цветовой модели**: Конвертация в HSV для работы с насыщенностью
3. **Попиксельная обработка**:
    - Для каждого пикселя с яркостью (V) < 0.5
    - Увеличение насыщенности (S) на 30%
    - Ограничение значений в диапазоне [0, 1]
4. **Обратное преобразование**: Возврат к модели RGB
5. **Наложение изображений**: Линейное смешивание с формулой:
   ```
   result = processed_image * 0.5 + second_image * 0.5
   ```
6. **Сохранение результата**: Запись в файл `output.bmp`

## Структура файлов

```
project/
├── main.cpp          # Основной исходный код программы
├── CImg.h           # Библиотека CImg (должна быть в пути включения)
├── input1.bmp       # Тестовое изображение 1 (создается автоматически)
├── input2.bmp       # Тестовое изображение 2 (создается автоматически)
└── output.bmp       # Результирующее изображение
```

## Примеры использования

### Пример 1: Базовая обработка
```bash
# Создание тестовых изображений и обработка
./image_processor
```

### Пример 2: Обработка пользовательских изображений
```bash
# Обработка двух конкретных изображений
./image_processor photo1.jpg background.png
```

## Обработка ошибок

Программа обрабатывает следующие ошибки:
- Отсутствие файлов изображений
- Неподдерживаемые форматы файлов
- Несовпадение размеров изображений
- Проблемы с записью результатов

## Технические детали

- **Цветовая модель**: HSV для обработки, RGB для ввода/вывода
- **Тип данных**: unsigned char для ввода/вывода, float для обработки
- **Коэффициент прозрачности**: 0.5 (можно изменить в коде)
- **Порог яркости**: 0.5 (50%) для увеличения насыщенности

## Автор

Программа разработана в рамках учебного задания по компьютерной графике.

## Лицензия

Для учебного использования.